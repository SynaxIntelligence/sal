<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1j6ha0l" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.13.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <bpmn:collaboration id="Collaboration_0knmru2">
    <bpmn:participant id="Participant_0rfzr1r" name="Workflow" processRef="Process_0fuwrmz" />
    <bpmn:participant id="Participant_0il9xur" name="RABBITMQ" />
    <bpmn:participant id="Participant_1byf0cf" name="USER" />
    <bpmn:participant id="Participant_0n2u2lz" name="Message" processRef="Process_1hfo7ll" />
    <bpmn:messageFlow id="Flow_0ed4wtn" sourceRef="getUserIP_1" targetRef="Participant_0il9xur" />
    <bpmn:messageFlow id="Flow_0nue3a8" sourceRef="Participant_0il9xur" targetRef="Activity_0m9phvv" />
    <bpmn:messageFlow id="Flow_0imo89f" sourceRef="Event_0gw8pcd" targetRef="Participant_1byf0cf" />
  </bpmn:collaboration>
  <bpmn:process id="Process_0fuwrmz" isExecutable="true">
    <bpmn:dataStoreReference id="DataStoreReference_05y5677" name="messages" />
    <bpmn:serviceTask id="getUserIP_1" name="Enqueue">
      <bpmn:incoming>Flow_0gooiny</bpmn:incoming>
    </bpmn:serviceTask>
    <bpmn:startEvent id="Event_1pl0an2" name="Статус документа изменился">
      <bpmn:outgoing>Flow_0gooiny</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_0d9ljuw" name="Check type">
      <bpmn:outgoing>Flow_1ag4tl7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0ypc3pj" name="Save to db">
      <bpmn:incoming>Flow_1ag4tl7</bpmn:incoming>
      <bpmn:outgoing>Flow_0zygnti</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0mzgmes">
        <bpmn:targetRef>DataStoreReference_05y5677</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1da86ih" name="Generate PUSH">
      <bpmn:incoming>Flow_1b1wsts</bpmn:incoming>
      <bpmn:outgoing>Flow_1pic349</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0bf3gkv">
      <bpmn:incoming>Flow_1pic349</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:intermediateThrowEvent id="Event_1w0dqqo">
      <bpmn:incoming>Flow_0zygnti</bpmn:incoming>
      <bpmn:outgoing>Flow_01x0xeg</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_13dynhn" />
    </bpmn:intermediateThrowEvent>
    <bpmn:serviceTask id="Activity_08b95g4" name="Set counter">
      <bpmn:incoming>Flow_01x0xeg</bpmn:incoming>
      <bpmn:outgoing>Flow_1b1wsts</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0gooiny" sourceRef="Event_1pl0an2" targetRef="getUserIP_1" />
    <bpmn:sequenceFlow id="Flow_1ag4tl7" sourceRef="Activity_0d9ljuw" targetRef="Activity_0ypc3pj" />
    <bpmn:sequenceFlow id="Flow_0zygnti" sourceRef="Activity_0ypc3pj" targetRef="Event_1w0dqqo" />
    <bpmn:sequenceFlow id="Flow_1b1wsts" sourceRef="Activity_08b95g4" targetRef="Activity_1da86ih" />
    <bpmn:sequenceFlow id="Flow_1pic349" sourceRef="Activity_1da86ih" targetRef="Event_0bf3gkv" />
    <bpmn:sequenceFlow id="Flow_01x0xeg" sourceRef="Event_1w0dqqo" targetRef="Activity_08b95g4" />
    <bpmn:textAnnotation id="TextAnnotation_1pzdn8o">
      <bpmn:text>id - docType - docNo - docId</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1qasvf4" sourceRef="getUserIP_1" targetRef="TextAnnotation_1pzdn8o" />
  </bpmn:process>
  <bpmn:process id="Process_1hfo7ll" isExecutable="true">
    <bpmn:serviceTask id="Activity_0m9phvv" name="Dequeue">
      <bpmn:incoming>Flow_05smgrh</bpmn:incoming>
      <bpmn:outgoing>Flow_1p8u1sh</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:startEvent id="Event_1mztm69" name="Event listener">
      <bpmn:outgoing>Flow_05smgrh</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_1sifrjq" name="Check type">
      <bpmn:incoming>Flow_1p8u1sh</bpmn:incoming>
      <bpmn:outgoing>Flow_0r5cg3z</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0ucspp3" name="Save to db">
      <bpmn:incoming>Flow_0r5cg3z</bpmn:incoming>
      <bpmn:outgoing>Flow_0q4wr2t</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_10c3ofn" name="Generate PUSH">
      <bpmn:incoming>Flow_1i0wtfp</bpmn:incoming>
      <bpmn:outgoing>Flow_1pl29ks</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_1uitm4q">
      <bpmn:incoming>Flow_1pl29ks</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:intermediateThrowEvent id="Event_0gw8pcd">
      <bpmn:incoming>Flow_0q4wr2t</bpmn:incoming>
      <bpmn:outgoing>Flow_0gw11zl</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1ezx7yh" />
    </bpmn:intermediateThrowEvent>
    <bpmn:serviceTask id="Activity_1uhm04y" name="Set counter">
      <bpmn:incoming>Flow_0gw11zl</bpmn:incoming>
      <bpmn:outgoing>Flow_1i0wtfp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_05smgrh" sourceRef="Event_1mztm69" targetRef="Activity_0m9phvv" />
    <bpmn:sequenceFlow id="Flow_1p8u1sh" sourceRef="Activity_0m9phvv" targetRef="Activity_1sifrjq" />
    <bpmn:sequenceFlow id="Flow_0r5cg3z" sourceRef="Activity_1sifrjq" targetRef="Activity_0ucspp3" />
    <bpmn:sequenceFlow id="Flow_0q4wr2t" sourceRef="Activity_0ucspp3" targetRef="Event_0gw8pcd" />
    <bpmn:sequenceFlow id="Flow_1i0wtfp" sourceRef="Activity_1uhm04y" targetRef="Activity_10c3ofn" />
    <bpmn:sequenceFlow id="Flow_1pl29ks" sourceRef="Activity_10c3ofn" targetRef="Event_1uitm4q" />
    <bpmn:sequenceFlow id="Flow_0gw11zl" sourceRef="Event_0gw8pcd" targetRef="Activity_1uhm04y" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0knmru2">
      <bpmndi:BPMNShape id="Participant_0rfzr1r_di" bpmnElement="Participant_0rfzr1r" isHorizontal="true">
        <dc:Bounds x="160" y="620" width="1350" height="270" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1krb3cz_di" bpmnElement="getUserIP_1">
        <dc:Bounds x="330" y="720" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1pl0an2_di" bpmnElement="Event_1pl0an2">
        <dc:Bounds x="232" y="742" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="222" y="793" width="56" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1cv3ghg_di" bpmnElement="Activity_0d9ljuw">
        <dc:Bounds x="670" y="720" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1or1i1w_di" bpmnElement="Activity_0ypc3pj">
        <dc:Bounds x="840" y="720" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0l9sxo3_di" bpmnElement="Activity_1da86ih">
        <dc:Bounds x="1260" y="720" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0bf3gkv_di" bpmnElement="Event_0bf3gkv">
        <dc:Bounds x="1412" y="742" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1w0dqqo_di" bpmnElement="Event_1w0dqqo">
        <dc:Bounds x="1012" y="742" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1fbfhej_di" bpmnElement="Activity_08b95g4">
        <dc:Bounds x="1110" y="720" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1pzdn8o_di" bpmnElement="TextAnnotation_1pzdn8o">
        <dc:Bounds x="330" y="820" width="220" height="41" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0gooiny_di" bpmnElement="Flow_0gooiny">
        <di:waypoint x="268" y="760" />
        <di:waypoint x="330" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ag4tl7_di" bpmnElement="Flow_1ag4tl7">
        <di:waypoint x="770" y="760" />
        <di:waypoint x="840" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0zygnti_di" bpmnElement="Flow_0zygnti">
        <di:waypoint x="940" y="760" />
        <di:waypoint x="1012" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1b1wsts_di" bpmnElement="Flow_1b1wsts">
        <di:waypoint x="1210" y="760" />
        <di:waypoint x="1260" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pic349_di" bpmnElement="Flow_1pic349">
        <di:waypoint x="1360" y="760" />
        <di:waypoint x="1412" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01x0xeg_di" bpmnElement="Flow_01x0xeg">
        <di:waypoint x="1048" y="760" />
        <di:waypoint x="1110" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1qasvf4_di" bpmnElement="Association_1qasvf4">
        <di:waypoint x="380" y="800" />
        <di:waypoint x="380" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0il9xur_di" bpmnElement="Participant_0il9xur" isHorizontal="true">
        <dc:Bounds x="160" y="490" width="1350" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_05y5677_di" bpmnElement="DataStoreReference_05y5677">
        <dc:Bounds x="865" y="925" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="864" y="985" width="51" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1byf0cf_di" bpmnElement="Participant_1byf0cf" isHorizontal="true">
        <dc:Bounds x="880" y="80" width="300" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1kr60ic" bpmnElement="Participant_0n2u2lz" isHorizontal="true">
        <dc:Bounds x="160" y="180" width="1350" height="240" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1u9d01q" bpmnElement="Activity_0m9phvv">
        <dc:Bounds x="500" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0fcvucg" bpmnElement="Event_1mztm69">
        <dc:Bounds x="232" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="216" y="323" width="68" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0m3w1br" bpmnElement="Activity_1sifrjq">
        <dc:Bounds x="670" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1610ygf" bpmnElement="Activity_0ucspp3">
        <dc:Bounds x="840" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0t6ktoz" bpmnElement="Activity_10c3ofn">
        <dc:Bounds x="1260" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ylo07t" bpmnElement="Event_1uitm4q">
        <dc:Bounds x="1412" y="272" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_014dg27" bpmnElement="Event_0gw8pcd">
        <dc:Bounds x="1012" y="272" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ixm5ld" bpmnElement="Activity_1uhm04y">
        <dc:Bounds x="1110" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_005dwyd" bpmnElement="Flow_05smgrh">
        <di:waypoint x="268" y="290" />
        <di:waypoint x="500" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0k7idm9" bpmnElement="Flow_1p8u1sh">
        <di:waypoint x="600" y="290" />
        <di:waypoint x="670" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0hifn3i" bpmnElement="Flow_0r5cg3z">
        <di:waypoint x="770" y="290" />
        <di:waypoint x="840" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_00cz0es" bpmnElement="Flow_0q4wr2t">
        <di:waypoint x="940" y="290" />
        <di:waypoint x="1012" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_06z4rxt" bpmnElement="Flow_1i0wtfp">
        <di:waypoint x="1210" y="290" />
        <di:waypoint x="1260" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0tftjcp" bpmnElement="Flow_1pl29ks">
        <di:waypoint x="1360" y="290" />
        <di:waypoint x="1412" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0ku0pf1" bpmnElement="Flow_0gw11zl">
        <di:waypoint x="1048" y="290" />
        <di:waypoint x="1110" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0mzgmes_di" bpmnElement="DataOutputAssociation_0mzgmes">
        <di:waypoint x="890" y="800" />
        <di:waypoint x="890" y="925" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ed4wtn_di" bpmnElement="Flow_0ed4wtn">
        <di:waypoint x="380" y="720" />
        <di:waypoint x="380" y="550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nue3a8_di" bpmnElement="Flow_0nue3a8">
        <di:waypoint x="550" y="490" />
        <di:waypoint x="550" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0imo89f_di" bpmnElement="Flow_0imo89f">
        <di:waypoint x="1030" y="272" />
        <di:waypoint x="1030" y="140" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
