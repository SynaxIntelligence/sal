# Функциональные требования

Целью данного документа является описание требований к разработке мобильного приложения для планирования похода в музей.
Мобильное приложение предоставляет пользователям возможность планировать поход в музей, составляя список произведений искусства, которые они хотят посмотреть, с целью выстроить оптимальный маршрут. Пользователи могут использовать приложение для авторизации через аккаунты в социальных сетях, получения информации о музее, прикрепления билетов к посещению, создания чек-листа или заметок о посещении, а также для просмотра ленты новостей о новых выставках.

## Функциональный блок Регистрация {id='SR-001-reg'}

### Описание и приоритет

Модуль "Регистрация" обеспечивает пользователей возможностью создать учетную запись в мобильном приложении,
чтобы получить доступ ко всем его функциям.

**Основные функции**

1. Создание учетной записи: Пользователь может заполнить регистрационную форму, указав свои учетные данные, такие как имя,
адрес электронной почты и пароль, для создания новой учетной записи в системе.
2. Подтверждение учетной записи: После заполнения регистрационной формы пользователю будет отправлено письмо с подтверждением
на указанный адрес электронной почты. Пользователь должен перейти по ссылке в письме, чтобы активировать свою учетную запись.
3. Авторизация после регистрации: После успешной регистрации пользователь автоматически аутентифицируется в системе и получает доступ ко всем функциям приложения.

**Дополнительные функции**

1. Регистрация через социальные сети: Пользователи могут выбрать вариант регистрации через свои учетные записи в социальных сетях,
таких как VK и Google для упрощения процесса.

### Функциональные требования

| № | Код                              | Описание                                                                                                                                                                                                                   |
|---|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-reg** {id='FR-001-reg'} | _Система_ должна предлагать два варианта регистрации _Пользователя_ в приложении:<br/>регистрация путем ввода логина и пароля, регистрация через социальные сети.                                                          |
| 2 | **FR-002-reg** {id='FR-002-reg'} | После нажатия _Пользователем_ управляющего элемента **Зарегистрироваться** _Система_ должна отправлять письмо для верификации почтового адреса _Пользователя_ на почтовый ящик, указанный _Пользователем_ при регистрации. |
| 3 | **FR-003-reg** {id='FR-003-reg'} | В случае ввода _Пользователем_ некорректных или неполных регистрационных данных, _Система_ должна оповещать _Пользователя_ об ошибке создания учетной записи.                                                              |

### Ограничения и зависимости

* Если пользователь введет неверные данные при регистрации, система выдаст сообщение об ошибке и попросит пользователя исправить их.
* Если пользователь не подтвердит свою учетную запись в течение 24 часов,
его регистрационная запись будет отменена, и ему придется повторно зарегистрироваться.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Reg)

## Функциональный блок Авторизация {id='SR-002-auth'}

### Описание и приоритет

Функциональный блок "Авторизация" предоставляет возможность пользователям войти в приложение для доступа
к персонализированным функциям и данным.

**Основные функции**
Аутентификация через аккаунты в социальных сетях: Пользователь может авторизоваться в приложении, используя свои учетные данные
из популярных социальных сетей, таких как VK и Google.
Вход с использованием учетной записи приложения: Пользователь может войти в приложение, используя свои учетные данные,
созданные специально для этого приложения (логин и пароль).
Восстановление пароля: Пользователь может запросить сброс пароля, а затем получить инструкции по его восстановлению на электронную почту или через SMS.

**Требования к безопасности**
Шифрование данных: Все учетные данные пользователя (логин, пароль) должны передаваться по зашифрованному каналу.
Политика паролей: Пароли пользователей должны соответствовать установленным правилам сложности и длины для обеспечения безопасности учетных записей.
Проверка подлинности: Приложение должно проверять подлинность учетных данных пользователя перед предоставлением доступа к защищенным ресурсам.
Интеграция с другими функциональными блоками:
Пользовательский профиль: После успешной аутентификации пользователь может получить доступ к своему профилю, где может управлять персональными данными, настройками учетной записи и другой персональной информацией.
Управление доступом: В зависимости от роли и прав доступа, предоставленных после аутентификации, пользователь может получить доступ к различным функциям приложения, таким как планирование походов в музей, просмотр новостей и т.д.

### Причинно-следственные связи

* При успешной авторизации пользователь получает доступ к функционалу приложения.
* Неавторизованный пользователь не может получить доступ к функционалу приложения.

### Функциональные требования

| № | Код                                | Описание                                                                                                                                                               |
|---|------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-auth** {id='FR-001-auth'} | _Система_ должна предлагать варианты аутентификации _Пользователя_ в приложении:<br/>аутентификация путем ввода логина и пароля, аутентификация через социальные сети. |
| 2 | **UR-001-auth** {id='UR-001-auth'} | _Пользователь_ должен иметь возможность войти в приложение путем ввода логина и пароля в [окне аутентификации](proto.md#auth_screen).                                  |
| 3 | **UR-002-auth** {id='UR-002-auth'} | _Пользователь_ должен иметь возможность войти в приложение, используя свои аккаунты в социальных сетях.                                                                |
| 4 | **UR-003-auth** {id='UR-003-auth'} | _Пользователь_ должен иметь возможность осуществить сброс и восстановление пароля.                                                                                     |                                                                                                                                                                      |                         |                                                                                                                                                                        |
| 5 | **FR-002-auth** {id='FR-002-auth'} | _Система_ должна направлять _Пользователю_ инструкцию по сбросу и восстановлению пароля на email, указанный при регистрации.                                           |
| 6 | **FR-003-auth** {id='FR-003-auth'} | _Система_ должна отображать информацию об ошибке аутентификации в случае некорректного ввода учетных данных _Пользователя_.                                            |

### Алгоритмы

* Процесс авторизации может быть реализован с использованием OAuth или подобных протоколов.
* Приложение должно получить доступ к API выбранной социальной сети для проверки учетных данных пользователя.

%product_short_name% реализует следующие методы аутентификации:

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

<tabs>
    <tab title="SSO">
        <code-block lang="plain text">![Alt Text](new_topic_options.png){ width=450 }</code-block>
    </tab>
    <tab title="2Factor">
        <code-block lang="xml">
            <![CDATA[<img src="new_topic_options.png" alt="Alt text" width="450px"/>]]></code-block>
    </tab>
</tabs>

### Ограничения и зависимости

* Пользователь может авторизоваться в приложении, используя свои учетные данные социальной сети VK, Google.
* После успешной авторизации пользователь получает доступ ко всем функциям приложения.

## Функциональный блок Просмотр запланированных визитов {id='SR-003-dashboard'}

### Функциональные требования

| № | Код                                          | Описание                                                                                                                                                                          |
|---|----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-dashboard** {id='FR-001-dashboard'} | _Система_ должна отображать перечень запланированных визитов _Пользователя_ на [Главном экране приложения](proto.md#home_screen) с возможностью перехода на экран Деталей визита. |

### Ограничения и зависимости

* На главном экране _Пользователь_ видит только предстоящие визиты.
* Одновременно на экране доступно не более одного визита для просмотра.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

## Функциональный блок Профиль пользователя {id='SR-004-profile'}

### Описание и приоритет

Модуль "Профиль пользователя" предоставляет пользователям возможность управлять своими персональными данными в мобильном приложении.

**Основные функции**
1. Просмотр профиля: Пользователь может просматривать информацию о своем профиле, включая имя, адрес электронной почты, изображение профиля и другие персональные данные.
2. Редактирование профиля: Пользователь может изменить свои персональные данные, такие как имя, адрес электронной почты, пароль и изображение профиля.

**Дополнительные функции**
1. Удаление профиля: Пользователь может удалить свой профиль и все связанные с ним данные из системы.

### Функциональные требования

| № | Код                                      | Описание                                                                                                                                       |
|---|------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **UR-001-profile** {id='UR-001-profile'} | _Пользователь_ должен иметь возможность удалить профиль и связанные с ним персональные данные.                                                 |
| 2 | **FR-001-profile** {id='FR-001-profile'} | _Система_ должна предупреждать _Пользователя_ о полном удалении данных профиля при активации управляющего элемента **Удалить профиль**.        |
| 3 | **UR-002-profile** {id='UR-002-profile'} | _Пользователь_ должен иметь возможность редактировать данные профиля и сохранить изменения.                                                    |
| 4 | **FR-002-profile** {id='FR-002-profile'} | _Система_ должна проводить валидацию сохраняемых _Пользователем_ изменений и уведомлять _Пользователя_ о статусе изменений (успешно / ошибка). |

### Ограничения и зависимости

1. Если пользователь вводит некорректные данные при редактировании профиля, система выдает сообщение об ошибке и просит пользователя исправить их.
2. Если пользователь удаляет свой профиль, все связанные с ним данные будут безвозвратно удалены, и пользователь потеряет доступ к функциональности приложения.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

## Функциональный блок Просмотр списка музеев {id='SR-005-museum-lst'}

### Описание и приоритет

Модуль "Просмотр списка музеев" предоставляет пользователям возможность просмотра доступных музеев,
их основной информации и возможности выбора для дальнейшего планирования посещения.

**Основные функции**

1. Отображение списка музеев: Пользователь может просматривать список доступных музеев, представленных в приложении.
2. Получение основной информации: Для каждого музея пользователь может получить основную информацию, такую как название, адрес и контактные данные.
3. Фильтрация списка музеев: Пользователь может фильтровать список музеев по типу и городу музея.
4. Поиск музеев: Пользователь может использовать функцию поиска для быстрого нахождения конкретного музея по его названию или другим параметрам.

### Функциональные требования

| № | Код                                            | Описание                                                                                                                                     |
|---|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-museum-lst** {id='FR-001-museum-lst'} | _Система_ должна отображать список музеев с указанием основной информацией: фото, название, адрес, телефон, адрес электронной почты.         |
| 2 | **UR-001-museum-lst** {id='UR-001-museum-lst'} | _Пользователь_ должен иметь возможность устанавливать настраиваемый фильтр для списка музеев по таким критериям как: тип музея, город музея. |
| 3 | **UR-002-museum-lst** {id='UR-002-museum-lst'} | _Пользователь_ должен иметь возможность искать музей в списке по названию.                                                                   |
| 4 | **UR-003-museum-lst** {id='UR-003-museum-lst'} | _Пользователь_ должен иметь возможность отсортировать список музеев по названию.                                                             |

### Ограничения и зависимости

1. В случае отсутствия доступных музеев в системе, пользователю будет показано сообщение об отсутствии данных.
2. Если произойдет ошибка при получении данных о музеях, пользователю будет показано сообщение о невозможности загрузки информации.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

### REST API /museum

<api-doc openapi-path="../api/museum.yaml">
    <api-endpoint endpoint="/museums" method="GET"/>
    <api-endpoint endpoint="/museums" method="POST"/>
</api-doc>

## Функциональный блок Просмотр подробной информации о музее {id='SR-006-museum-details'}

### Описание и приоритет

Модуль "Просмотр подробной информации о музее" предоставляет пользователям возможность получения дополнительной информации о выбранном музее, включая список выставок, актуальные события и другие интересные данные.

**Основные функции**

1. Отображение основной информации: Пользователь может просматривать основные сведения о музее, такие как название, адрес, контактные данные и описание.
2. Просмотр режима работы: Пользователь может узнать режим работы музея, включая часы работы в будние дни, выходные и праздничные дни.
3. Получение списка выставок: Пользователь может просматривать список текущих и предстоящих выставок в музее, включая информацию о дате начала и окончания, тематике и других деталях.
4. Подробная информация о выставках: Пользователь может получить подробное описание каждой выставки, включая список экспонатов, информацию о кураторах и другие интересные факты.

### Функциональные требования

| № | Код                                                    | Описание                                                                                                                                                     |
|---|--------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-museum-details** {id='FR-001-museum-details'} | _Система_ должна отображать подробную информацию о музее: часы работы, адрес, контактные данные, описание, тип музея.                                        |
| 2 | **FR-002-museum-details** {id='FR-002-museum-details'} | _Система_ должна отображать список текущих и предстоящих выставок и мероприятий в музее, включая основную информацию: дата начала, дата окончания, тематика. |
| 3 | **UR-001-museum-details** {id='UR-001-museum-details'} | _Пользователь_ должен иметь возможность получить детальную информацию о мероприятии, включая список экспонатов, информацию о кураторах, интересные факты.    |

### Ограничения и зависимости

1. Если музей не предоставляет информации о своих выставках или событиях, пользователю будет показано сообщение о недоступности данных.
2. Если произойдет ошибка при получении информации о музее, пользователю будет показано сообщение о невозможности загрузки данных.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

### REST API /details

<api-doc openapi-path="../api/museum.yaml">
    <api-endpoint endpoint="/museums" method="GET"/>
    <api-endpoint endpoint="/museums" method="POST"/>
</api-doc>

## Функциональный блок Планирование посещения музея {id='SR-007-museum-visit'}

### Описание и приоритет

Модуль "Планирование посещения музея" позволяет пользователям составить план своего посещения музея, выбрав город, музей, дату и время посещения, а также оценивая оптимальный маршрут и создавая чек-лист экспонатов для просмотра.

**Основные функции**

1. Выбор музея: Пользователь может выбрать музей из предложенного списка, который он планирует посетить.
2. Установка даты и времени посещения: Пользователь может установить желаемую дату и время своего посещения.
3. Составление чек-листа экспонатов: Пользователь может создать список интересующих его экспонатов или произведений искусства для просмотра в музее.
4. Планирование маршрута: Приложение определяет оптимальный маршрут для посещения выбранных экспонатов в музее с учетом времени их работы и расположения в залах.

### Причинно-следственные связи

* После выбора музея и времени посещения пользователь может получить информацию о доступности билетов и актуальном режиме работы музея.

### Функциональные требования

| № | Код                                                | Описание                                                                                                                                 |
|---|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | **FR-001-museum-visit** {id='FR-001-museum-visit'} | _Система_ должна отображать список музеев для выбора _Пользователем_.                                                                    |
| 2 | **UR-001-museum-visit** {id='UR-001-museum-visit'} | _Пользователь_ должен иметь возможность установить дату и время посещения музея.                                                         |
| 3 | **UR-002-museum-visit** {id='UR-002-museum-visit'} | _Пользователь_ должен иметь возможность выбрать экспонаты для просмотра из списка доступных экспонатов в рамках выбранной выставки.      |
| 4 | **FR-002-museum-visit** {id='FR-002-museum-visit'} | _Система_ должна рассчитывать оптимальный маршрут для посещения выбранных экспонатов, исходя из времени посещения и режима работы музея. |

### Ограничения и зависимости

* Пользователь может выбрать город, в котором находится музей, из выпадающего списка или ввести его вручную.
* Пользователь может выбрать конкретный музей из списка или ввести его название вручную.
* Пользователь может указать дату и время планируемого посещения.
* Пользователь может сохранить планируемое посещение для последующего просмотра и редактирования.
* Если произойдет ошибка при построении оптимального маршрута или получении информации о билетах, пользователю будет показано сообщение о невозможности выполнения операции.

### Алгоритмы

* Пользователь должен выбрать город, музей, дату и время посещения.
* Для оптимального маршрута необходимо использовать алгоритмы маршрутизации, например, алгоритмы поиска кратчайшего пути или оптимального маршрута в графе.

## Функциональный блок Прикрепление билетов к посещению {id='SR-008-tickets'}

### Описание и приоритет

Модуль "Прикрепление билетов к посещению музея" позволяет пользователям прикрепить электронные билеты к запланированному посещению музея в приложении.

**Основные функции**

1. Выбор посещения: Пользователь может выбрать конкретное запланированное посещение музея, к которому он хочет прикрепить билеты.
2. Прикрепление билетов: Пользователь может загрузить электронные билеты или использовать информацию о приобретенных билетах в приложении, чтобы прикрепить их к выбранному посещению.
3. Просмотр информации о билетах: Пользователь может просмотреть информацию о прикрепленных билетах, включая дату и время посещения, музей и другие сведения.

### Функциональные требования

| № | Код                                      | Описание                                                                                                                          |
|---|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 1 | **UR-001-tickets** {id='UR-001-tickets'} | _Пользователь_ должен иметь возможность выбрать конкретное запланированное посещение музея.                                       |
| 2 | **UR-002-tickets** {id='UR-002-tickets'} | _Пользователь_ должен иметь возможность загрузить электронные билеты в формате, поддерживаемом приложением.                       |
| 3 | **UR-003-tickets** {id='UR-003-tickets'} | _Пользователь_ должен иметь возможность прикрепить загруженные билеты к выбранному посещению музея.                               |
| 4 | **FR-001-tickets** {id='FR-001-tickets'} | _Система_ должна предоставлять информацию о успешном или неуспешном прикреплении билетов.                                         |
| 5 | **UR-004-tickets** {id='UR-004-tickets'} | _Пользователь_ должен иметь возможность удалить прикрепленные билеты или изменить информацию о них, если это необходимо.          |
| 6 | **FR-002-tickets** {id='FR-002-tickets'} | _Система_ должна обеспечить обработку ошибок в случае возникновения проблем при загрузке билетов или их прикреплении к посещению. |

### Причинно-следственные связи

1. Выбор посещения:
   * Причина: Пользователь выбирает конкретное посещение музея, к которому он хочет прикрепить билеты.
   * Следствие: Пользователю предоставляется возможность загрузить билеты и прикрепить их к выбранному посещению.
2. Загрузка билетов:
   * Причина: Пользователь загружает электронные билеты в приложение.
   * Следствие: Пользователь получает возможность прикрепить загруженные билеты к выбранному посещению музея.
3. Прикрепление билетов к посещению:
   * Причина: Пользователь выбирает загруженные билеты и прикрепляет их к выбранному посещению.
   * Следствие: Загруженные билеты связываются с выбранным посещением музея в системе.
4. Просмотр информации о прикрепленных билетах:
   * Причина: Пользователь хочет просмотреть информацию о прикрепленных к посещению билетах.
   * Следствие: Пользователь получает доступ к информации о прикрепленных билетах, включая дату и время посещения, музей и другие сведения.
5. Обработка ошибок:
   * Причина: Возникновение ошибок при загрузке билетов или их прикреплении к посещению.
   * Следствие: Приложение информирует пользователя о возникших ошибках и предоставляет инструкции по их устранению.

### Ограничения и зависимости

* Пользователь может прикрепить электронные или физические билеты к запланированному посещению музея.
* Билеты могут быть прикреплены из сохраненных данных пользователя или загружены из внешнего источника (например, электронная почта или карточка билетов).
* Если произойдет ошибка при загрузке электронных билетов или получении информации о приобретенных билетах, пользователю будет показано сообщение о невозможности прикрепления билетов.
* Если выбранное посещение уже прошло, пользователю будет показано сообщение о невозможности прикрепления билетов к уже прошедшему посещению.

### Алгоритмы

> Перейти к связанному [бизнес-процессу](bpm.md#BP-001-Auth)

### REST API /tickets

<api-doc openapi-path="../api/museum.yaml">
    <api-endpoint endpoint="/museums" method="GET"/>
    <api-endpoint endpoint="/museums" method="POST"/>
</api-doc>

## Функциональный блок Создание чек-листа/заметки о посещении {id='SR-009-checklist'}

1. Пользователь может создать список залов и экспонатов, которые он хочет посетить в музее.
2. Пользователь может добавить заметки о каждом экспонате, например, его описание или интересующие факты.
3. Пользователь может сохранить созданный чек-лист или заметки.

### Причинно-следственные связи

* Создание чек-листа помогает пользователю структурировать свои планы и не пропустить интересные экспонаты в музее.

### Ограничения и зависимости

* Пользователь может создать чек-лист или заметку о посещении музея, указав, какие залы или экспонаты он хочет посетить.
* Чек-лист/заметка может быть создана перед посещением музея или во время самого посещения.

### Алгоритмы

* Пользователь должен иметь возможность выбрать залы и экспонаты, которые он хочет посетить, и создать чек-лист или заметку.
* Для оптимального маршрута можно использовать алгоритмы оптимального покрытия, например, жадный алгоритм или метод ветвей и границ.

## Функциональный блок Просмотр ленты новостей о новых выставках {id='SR-010-news'}

1. Пользователь может просмотреть ленту новостей о новых выставках в музее.
2. Пользователь может получить информацию о дате, времени и теме каждой выставки.
3. Пользователь может подписаться на уведомления о предстоящих выставках и мероприятиях в музее.

### Причинно-следственные связи

* Пользователь может быть в курсе последних новостей о выставках и событиях в музее, что может повлиять на его решение о посещении.

### Ограничения и зависимости

* Пользователь может просматривать ленту новостей о предстоящих и текущих выставках в музее.
* Новости обновляются регулярно и содержат информацию о выставках, датах, времени и других событиях.

### Алгоритмы

* Приложение должно получать данные о новых выставках через API музея или другие источники новостей.
* Данные о новых выставках могут быть отображены в виде списка для пользователя.